# JavaScript高级程序设计读书笔记
## 在HTML中使用JavaScript

### `<script>`标签

`HTML4.01`为`<script>`定义了6个属性

- `async`：表示应该立即下载脚本，但不应妨碍页面中的其他操作，比如下载其他资源或等待加载其他脚本。支队外部脚本文件有效。

- `defer`：表示脚本可以延迟到文档完全被解析和显示之后再执行。支队外部脚本文件有效。

- `charset`：表示通过src属性指定的代码的字符集。由于大多数浏览器会忽略它的值，因此这个属性很少有人用。

- `language`：已废弃

- `src`：表示包含要执行代码的外部文件

- `type`：表示编写代码使用的脚本语言的内容类型（也称为MIME类型）。

  

**注意：**

- 带有` src `属性的`<script>`元素不应该在其`<script>`和`</script>`标签之间再 包含额外的 JavaScript 代码。如果包含了嵌入的代码，则只会下载并执行外部脚本文件，嵌入的代码 会被忽略。

### 标签的位置

传统的做法是将所有的`<script>`元素都放在页面的`<head>`元素中，但这样做的话，意味着必须等到全部的`JavaScript`代码都被下载、解析和执行完成以后，才能开始呈现页面的内容（浏览器在遇到`<body>`标签时才开始呈现内容）。

这样将会导致浏览器在呈现页面时出现明显的延迟，而延迟期间的浏览器窗口将是一片空白。

为了避免这个问题，则将全部`JavaScript`引用放在`<body>`元素中页面内容的后面。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Example HTML Page</title>
  </head>
  <body>
    <!-- 这里放内容 -->
    <script type="text/javascript" src="example1.js"></script> 				<script type="text/javascript" src="example2.js"></script>
  </body>
</html>
```

### 延迟脚本——defer

立即下载但延迟执行。

脚本按照它们出现的先后顺序执行，第一个延迟脚本会在第二个延迟脚本前执行。

HTML5中明确规定，`defer`属性只适用于外部脚本文件。因此支持`HTML5`的实现会忽略给嵌入脚本设置的`defer`属性。

IE4、Firefox 3.5、Safari 5 和 Chrome 是最早支持 `defer `属性的浏览器。其他浏览器会忽略这个属性，像平常一样处理脚本。

因此，把延迟脚本放在页面底部仍然是最佳选择。

### 异步脚本——async

告诉浏览器立即下载文件。

脚本并不保证按照指定它们的先后顺序执行。因此，确保两者之间互不依赖非常重要。

异步脚本在页面的`load`事件前执行，可能会在`DOMContentLoaded`事件触发之前或之后执行。

### 外部文件的优点

- 可维护性
- 可缓存：浏览器能够根据具体的设置缓存链接的所有外部文件
- 适应未来